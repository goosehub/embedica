function embedica(a,b){var c={youtube:!0,vimeo:!0,twitch:!0,soundcloud:!0,vocaroo:!0,video_url:!0,image_url:!0,general_url:!0};return b=Object.assign(c,b),b.youtube&&(a=convert_youtube(a)),b.vimeo&&(a=convert_vimeo(a)),b.twitch&&(a=convert_twitch(a)),b.soundcloud&&(a=convert_soundcloud(a)),b.vocaroo&&(a=convert_vocaroo(a)),b.video_url&&(a=convert_video_url(a)),b.image_url&&(a=convert_image_url(a)),b.general_url&&(a=convert_general_url(a)),a}function convert_youtube(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?!channel\/)(?!user\/)(?:watch\?v=)?([a-zA-Z0-9_-]{11})(?:\S+)?/g;if(b.test(a))var c='<span class="message_youtube_parent"><iframe src="//www.youtube.com/embed/$1" frameborder="0" allowfullscreen class="message_youtube message_content"></iframe></span>',a=a.replace(b,c);return a}function convert_vimeo(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(\S+)/g;if(b.test(a))var c='<iframe src="//player.vimeo.com/video/$1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen class="message_vimeo message_content"></iframe>',a=a.replace(b,c);return a}function convert_twitch(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:twitch\.tv)\/?(\S+)/g;if(b.test(a))var c='<iframe src="https://player.twitch.tv/?channel=$1&!autoplay" frameborder="0" allowfullscreen="true" scrolling="no" height="378" width="620" class="message_twitch message_content"></iframe>',a=a.replace(b,c);return a}function convert_vocaroo(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:vocaroo\.com\/i)\/?(\S+)/g;if(b.test(a))var c='<object width="148" height="44" class="message_vocaroo message_content"><param name="movie" value="http://vocaroo.com/player.swf?playMediaID=$1&autoplay=0"></param><param name="wmode" value="transparent"></param><embed src="http://vocaroo.com/player.swf?playMediaID=$1&autoplay=0" width="148" height="44" wmode="transparent" type="application/x-shockwave-flash"></embed></object>',a=a.replace(b,c);return a}function convert_video_url(a){var b=/([-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?(?:webm|mp4|ogv))/gi;if(b.test(a))var c='<video controls="" loop="" controls src="$1" style="max-width: 960px; max-height: 676px;" class="message_video message_content"></video>',a=a.replace(b,c);return a}function convert_image_url(a){var b=/(?!.*")([-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?(?:jpg|jpeg|gif|png)(?:\?\S+)?)/gi;if(b.test(a))var c='<a href="$1" target="_blank" class="message_image_link message_content"><img class="message_image message_content" src="$1"/></a><br />',a=a.replace(b,c);return a}function convert_general_url(a){var b=/(?!.*")([-a-zA-Z0-9@:%_\+.~#?&\/\/=;]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=;]*))/gi;if(b.test(a))var c='<a href="$1" target="_blank" class="message_link message_content">$1</a>',a=a.replace(b,c);return a}function convert_soundcloud(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:soundcloud\.com)(\/\S+\/)(\S+)/g;if(b.test(a)){var c=(new Date).getUTCMilliseconds();xhr=new XMLHttpRequest;var d="http://soundcloud.com/oembed";xhr.open("POST",d,!0),xhr.setRequestHeader("Content-type","application/json");var e=JSON.stringify({format:"json",url:a});xhr.send(e),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var a=JSON.parse(xhr.responseText);document.getElementById(c).innerHTML=a.html}};var f='<span id="'+c+'" class="message_soundcloud message_content"></span>',a=a.replace(b,f)}return a}
function embedica(a,b){var c={youtube:!0,vimeo:!0,twitch:!0,soundcloud:!0,vocaroo:!0,video_url:!0,image_url:!0,general_url:!0},d=new RegExp("<br>","g");return a=a.replace(d," <br> "),b=Object.assign(c,b),b.youtube&&(a=embedica_convert_youtube(a)),b.vimeo&&(a=embedica_convert_vimeo(a)),b.twitch&&(a=embedica_convert_twitch(a)),b.soundcloud&&(a=embedica_convert_soundcloud(a)),b.vocaroo&&(a=embedica_convert_vocaroo(a)),b.video_url&&(a=embedica_convert_video(a)),b.image_url&&(a=embedica_convert_image(a)),b.general_url&&(a=embedica_convert_link(a)),a}function embedica_convert_youtube(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?!channel\/)(?!user\/)(?:watch\?v=)?([a-zA-Z0-9_-]{11})(?:\S+)?/g;if(b.test(a))var c='<span class="embedica_youtube embedica_element"><iframe src="//www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe></span>',a=a.replace(b,c);return a}function embedica_convert_vimeo(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(\S+)/g;if(b.test(a))var c='<span class="embedica_vimeo embedica_element"><iframe src="//player.vimeo.com/video/$1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></span>',a=a.replace(b,c);return a}function embedica_convert_twitch(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:twitch\.tv)\/?(\S+)/g;if(b.test(a))var c='<span class="embedica_twitch embedica_element"><iframe src="https://player.twitch.tv/?channel=$1&!autoplay" frameborder="0" allowfullscreen="true" scrolling="no"></iframe></span>',a=a.replace(b,c);return a}function embedica_convert_vocaroo(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:vocaroo\.com\/i)\/?(\S+)/g;if(b.test(a))var c='<span class="embedica_vocaroo embedica_element"><object><param name="movie" value="http://vocaroo.com/player.swf?playMediaID=$1&autoplay=0"></param><param name="wmode" value="transparent"></param><embed src="http://vocaroo.com/player.swf?playMediaID=$1&autoplay=0" wmode="transparent" type="application/x-shockwave-flash"></embed></object></span>',a=a.replace(b,c);return a}function embedica_convert_video(a){var b=/([-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?(?:webm|mp4|ogv))/gi;if(b.test(a))var c='<span class="embedica_video embedica_element"><video controls="" loop="" controls src="$1"></video></span>',a=a.replace(b,c);return a}function embedica_convert_image(a){var b=/(?!.*")([-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?(?:jpg|jpeg|gif|png)(?:\?\S+)?)/gi;if(b.test(a))var c='<span class="embedica_image embedica_element"><a href="$1" target="_blank"><img class="embedica_image embedica_element" src="$1"/></a></span>',a=a.replace(b,c);return a}function embedica_convert_link(a){var b=/(?!.*")([-a-zA-Z0-9@:%_\+.~#?&\/\/=;]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=;]*))/gi;if(b.test(a))var c='<span class="embedica_link embedica_element"><a href="$1" target="_blank">$1</a></span>',a=a.replace(b,c);return a}function embedica_convert_soundcloud(a){var b=/(?:http?s?:\/\/)?(?:www\.)?(?:soundcloud\.com)(\/\S+\/)(\S+)/g;if(b.test(a)){var c=(new Date).getUTCMilliseconds();xhr=new XMLHttpRequest;var d="http://soundcloud.com/oembed";xhr.open("POST",d,!0),xhr.setRequestHeader("Content-type","application/json");var e=JSON.stringify({format:"json",url:a});xhr.send(e),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var a=JSON.parse(xhr.responseText);document.getElementById(c).innerHTML=a.html}};var f='<span id="'+c+'" class="embedica_soundcloud embedica_element"></span>',a=a.replace(b,f)}return a}
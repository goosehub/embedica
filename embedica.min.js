function embedica(e,a){var t=new RegExp("<br>","g");return e=e.replace(t," <br> "),(a=Object.assign({youtube:!0,vimeo:!0,twitch:!0,soundcloud:!0,vocaroo:!0,imgur:!0,video_url:!0,image_url:!0,general_url:!0},a)).youtube&&(e=embedica_convert_youtube(e)),a.vimeo&&(e=embedica_convert_vimeo(e)),a.twitch&&(e=embedica_convert_twitch(e)),a.soundcloud&&(e=embedica_convert_soundcloud(e)),a.vocaroo&&(e=embedica_convert_vocaroo(e)),a.imgur&&(e=embedica_convert_imgur(e)),a.video_url&&(e=embedica_convert_video(e)),a.image_url&&(e=embedica_convert_image(e)),a.general_url&&(e=embedica_convert_link(e)),e}function embedica_convert_youtube(e){var a=/(?:http?s?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?!channel\/)(?!user\/)(?:watch\?v=)?([a-zA-Z0-9_-]{11})(?:\S+)?/g;if(a.test(e))e=e.replace(a,'<span class="embedica_youtube embedica_element"><iframe src="//www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe></span>');return e}function embedica_convert_vimeo(e){var a=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(\S+)/g;if(a.test(e))e=e.replace(a,'<span class="embedica_vimeo embedica_element"><iframe src="//player.vimeo.com/video/$1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></span>');return e}function embedica_convert_twitch(e){var a=/(?:http?s?:\/\/)?(?:www\.)?(?:twitch\.tv)\/?(\S+)/g;if(a.test(e))e=e.replace(a,'<span class="embedica_twitch embedica_element"><iframe src="https://player.twitch.tv/?channel=$1&!autoplay" frameborder="0" allowfullscreen="true" scrolling="no"></iframe></span>');return e}function embedica_convert_vocaroo(e){var a=/(?:http?s?:\/\/)?(?:www\.)?(?:vocaroo\.com\/i)\/?(\S+)/g;if(a.test(e))e=e.replace(a,'<span class="embedica_vocaroo embedica_element"><object><param name="movie" value="http://vocaroo.com/player.swf?playMediaID=$1&autoplay=0"></param><param name="wmode" value="transparent"></param><embed src="http://vocaroo.com/player.swf?playMediaID=$1&autoplay=0" wmode="transparent" type="application/x-shockwave-flash"></embed></object></span>');return e}function embedica_convert_imgur(e){var a=/(?:http?s?:\/\/)?(?:www\.)?(?:imgur\.com)\/a\/?(\S+)/g;if(a.test(e)){e=e.replace(a,'<span class="embedica_imgur embedica_element"><blockquote class="imgur-embed-pub" lang="en" data-id="a/$1"><a href="//imgur.com/$1"></a></blockquote><script async src="//s.imgur.com/min/embed.js" charset="utf-8"><\/script></span>');console.log(e)}return e}function embedica_convert_video(e){var a=/([-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?(?:webm|mp4|ogv))/gi;if(a.test(e))e=e.replace(a,'<span class="embedica_video embedica_element"><video controls="" loop="" controls src="$1"></video></span>');return e}function embedica_convert_image(e){var a=/(?!.*")([-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?(?:jpg|jpeg|gif|png)(?:\?\S+)?)/gi;if(a.test(e))e=e.replace(a,'<span class="embedica_image embedica_element"><a href="$1" target="_blank"><img class="embedica_image embedica_element" src="$1"/></a></span>');return e}function embedica_convert_link(e){var a=/(?!.*")([-a-zA-Z0-9@:%_\+.~#?&\/\/=;]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=;]*))/gi;if(a.test(e))e=e.replace(a,'<span class="embedica_link embedica_element"><a href="$1" target="_blank">$1</a></span>');return e}function embedica_convert_soundcloud(e){var a=/(?:http?s?:\/\/)?(?:www\.)?(?:soundcloud\.com)(\/\S+\/)(\S+)/g;if(a.test(e)){var t=(new Date).getUTCMilliseconds();xhr=new XMLHttpRequest;xhr.open("POST","http://soundcloud.com/oembed",!0),xhr.setRequestHeader("Content-type","application/json");var r=JSON.stringify({format:"json",url:e});xhr.send(r),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var e=JSON.parse(xhr.responseText);document.getElementById(t).innerHTML=e.html}};var c='<span id="'+t+'" class="embedica_soundcloud embedica_element"></span>';e=e.replace(a,c)}return e}